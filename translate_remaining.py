#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Автоматический перевод оставшихся файлов класса 11 на кыргызский язык.
Заменяет основные UI строки в исходных файлах на кыргызские эквиваленты.
"""

import re

# Словарь переводов: русский -> кыргызский
TRANSLATIONS = {
    # Титулы и названия
    "Показатель преломления стекла — n = sin a / sin b": "Сынык бөлүнүш көрсөткүчү - n = sin a / sin b",
    "Дифракция и длина волны — λ = a·d / b": "Дифракция жана толун волны - λ = a·d / b", 
    "Спектры — спектроскоп": "Спектрлер - спектроскоп",
    "Фокусное расстояние линзы — определение f": "Линзанын фокус аралыгы - f аныктоо",
    
    # UI элементы
    "Параметры": "Параметрлер",
    "Параметры маятника": "Маятниктин параметрлери",
    "Параметры эксперимента": "Эксперименттин параметрлери",
    "Параметры источника": "Булак параметрлери",
    "Управление": "Башкаруу",
    "Управление нагревом": "Ысытууну башкаруу",
    "Управление нагрузкой": "Жүктөмдү башкаруу",
    "Режим": "Режим",
    "Измерения": "Өлчөөлөр",
    "Выбор источника": "Булактын тандоосу",
    
    # Ручной режим
    "Ручной режим": "Кол режими",
    "Ручной режим (ученик сам записывает": "Кол режими (студент өзү",
    "ручной режим": "кол режими",
    
    # Поля
    "Поля ученика": "Студенттин талаалары",
    "Поля ученика (введите свои измерения)": "Студенттин талаалары (өлчөөнү киргизиңиз)",
    "Поля ученика (введите измерения)": "Студенттин талаалары (өлчөөнү киргизиңиз)",
    "Поля ученика (введите наблюдения)": "Студенттин талаалары (байкоолорду киргизиңиз)",
    
    # Кнопки
    "Применить параметры": "Параметрлерди колдонуу",
    "Применить": "Колдонуу",
    "Применить источник": "Булакты колдонуу",
    "Применить параметры маятника": "Маятниктин параметрлерди колдонуу",
    "Запустить маятник": "Маятникти ишке салуу",
    "Остановить маятник": "Маятникти тоготуу",
    "Сброс движения": "Кыймылды сброс",
    "Включить нагрев": "Ысытууну күйгүзүү",
    "Выключить нагрев": "Ысытууну өчүрүү",
    "Ключить нагрев": "Ысытууну күйгүзүү",
    "Выключить": "Өчүрүү",
    "Ключить нагреватель": "Ысытоочту күйгүзүү",
    "Повернуть луч": "Нурду айлантуу",
    "Измерить (имитация)": "Өлчөө (имитация)",
    "Измерить (имитация времени)": "Өлчөө (убактысын имитация)",
    "Измерить (имитация времени)": "Өлчөө (убактысын имитация)",
    "Измерить": "Өлчөө",
    "Имитация": "Имитация",
    "Проверить": "Текшер",
    "Проверить g": "g текшер",
    "Проверить α": "α текшер",
    "Проверить λ": "λ текшер",
    "Проверить n": "n текшер",
    "Проверить f": "f текшер",
    "Проверить наблюдение": "Байкоону текшер",
    "Показать ответ": "Жоопту көрсөт",
    "Показать правильные линии": "Туура сызыктарды көрсөт",
    "Показать ответ": "Жоопту көрсөт",
    "Случайный эксперимент": "Кокус эксперимент",
    "Случайный пример": "Кокус мисал",
    "Сброс": "Сброс",
    "Сброс всех полей": "Бардык талаалар сброс",
    "Очистить": "Тазалоо",
    
    # Заголовки разделов
    "Результаты и подсказки": "Жыйынтыктар жана кеңештер",
    "Результаты": "Жыйынтыктар",
    
    # Чекбоксы
    "Включить": "Күйгүзүү",
    "Выключить": "Өчүрүү",
}

def translate_file(filepath):
    """Читает файл, применяет переводы и сохраняет обратно."""
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            content = f.read()
        
        # Применяем переводы
        original_length = len(content)
        for ru, kg in TRANSLATIONS.items():
            # Ищем в кавычках (QLabel, QPushButton, setWindowTitle и т.д.)
            content = re.sub(f'["\']({re.escape(ru)})["\']', f'"{kg}"', content)
        
        translated_count = len([1 for ru, kg in TRANSLATIONS.items() if ru in content])
        
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)
        
        return True, translated_count
    except Exception as e:
        return False, str(e)

# Файлы для перевода
files_to_translate = [
    r"c:\Users\tilek\Desktop\virtualLabs\Переведённые_лабораторные\класс 11\lab112\main.py",
    r"c:\Users\tilek\Desktop\virtualLabs\Переведённые_лабораторные\класс 11\lab113\main.py",
    r"c:\Users\tilek\Desktop\virtualLabs\Переведённые_лабораторные\класс 11\lab114\main.py",
    r"c:\Users\tilek\Desktop\virtualLabs\Переведённые_лабораторные\класс 11\lab115\main.py",
]

if __name__ == "__main__":
    print("Перевод оставшихся файлов класса 11...")
    for filepath in files_to_translate:
        success, result = translate_file(filepath)
        if success:
            print(f"✅ {filepath}: {result} строк переведено")
        else:
            print(f"❌ {filepath}: {result}")
    print("Готово!")
